> pocket 阅读，当前也不确定这种记录方式是否高效，可以带来多大收益，出发点是认为读过的内容即便在 `pocket` 内归档、标注了，但是事后回顾查找仍然很难，记忆中依稀记得关键词如果搜索无果，就束手无策了。如果对印象深刻的文章，把想法思考，整理集中记录起来，这样重新查找到的概率也会高一些，希望在计划执行的过程中能够有更好的方式，目前而言，当前是我能想到的最佳方案了。



## 内容概要列表及简评

***

### 20200329



#### [一致性哈希——一个高效、可扩展的数据分配算法](https://medium.com/@animeshgaitonde/consistent-hashing-an-efficient-scalable-data-distribution-algorithm-a81fc5c0a6c7) 



一致性哈希算法用于解决数据分区问题，目前被 cassandra , Rika, Dynamo DB 等广泛使用。

能够使用达到 `O(1)` 读写的数据结构是 `HashMap` ,但是在分区存储的结构中，普通的 `HashMap` 结构存在一下两个问题：

- `hash(data)%N` 与 `N` 强相关，如果进行横向扩展，需要对之前的所有数据进行重新分配

- 依然与 `N` 相关，如果机器损坏需要被移除，依然要进行数据的重新分配

一致性哈希算法可以解决这类问题，算法绑定的是 server 的 ip 地址，对每一个 server ， 计算 `hash(ip)%360.00` ,同样对于数据，计算 `hash(data)%360.00`  ，即将hash值映射到圆上的一个点，之后按时钟顺序匹配数据最相近的 server ，这样带来的好处是显而易见的，增加或者减少 server 时，只有两个 server 之间的数据或者被减少的 server 上的数据需要重新分配。

同时为了进一步平衡每个 server 的负载，增加虚拟节点的概念，每个 server 都会映射几个虚拟节点，均匀分布在环上。



![tony](https://miro.medium.com/max/1000/1*6W1FxcFdYJkvEm06UOHH4g.gif)



> 从作者原文发现一张图，摘录在此，加深印象